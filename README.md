# BuffPanel Unity SDK

This repository contains an implementation with a simple interface designed to easily communicate with the REST API of the BuffPanel service from within your Unity Game.

Also included is a test project for debugging purposes, which was created in the Unity Framework version `5.4.2f2`.

For more information on the BuffPanel service, please visit our [website](http://buffpanel.com/), and read our [help pages](http://buffpanel.com/help/introduction).

## Integration guide

To install the Unity SDK in your game you need to:

1. Download / clone the newest version of the SDK from this repository.
2. Copy the contents of the `/Assets/Scripts/BuffPanelSDK/` directory from within the repository into your game project.

### Setup tracking

Include the following line of code into your project's code. It should be executed **at the startup of the game**, **once per game session** for tracking to work correctly.

```
BuffPanel.BuffPanel.Track(game_token, player_token, is_existing_player, attributes);
```

- `game_token` is a *string* value, that's generated by the BuffPanel platform during the registration process and is used to identify your game.
- `player_token` is a *string* value, that serves as the current player's unique identifier, which doesn't change between game sessions. Common choices are for instance the player's *steam id* or her *email address*, or anything else you may be using internally within your game.
- `is_existing_player` is a *boolean* value, that lets us know whether the current player has already run the game before (*true*) or is a new player (*false*).
- `attributes` are a *Dictionary<string, string>* value, that carry any additional information valuable for you, for example purchased DLC list

## How it works?

When the `Track` method is called, the SDK sends an HTTP request to the REST API of the BuffPanel servers.

Upon recieving this event the BuffPanel service identifies your game using the submitted `game_token` and internally attempts to attribute the player's **run event** to any of the running **campaigns** for your game.

## Callbacks

You can add an optional event handler by extending the supplied `BuffPanel.Callback` interface and implementing both its methods.

If a request attempt succeeds, the method `void success(WWW www)` is called and if it fails the method `void error(WWW www)` is called instead. In both methods the `WWW www` object contains all relevant information regarding the request. For more information on the `WWW` class please read the [Unity documentation](http://docs.unity3d.com/ScriptReference/WWW.html).

To use your extended version of the `BuffPanel.Callback` interface (let's say you called it `MyCallback`), you need to include this line of code in the place in your project's code, where you wish to track the **event**:

```
BuffPanel.BuffPanel.Track(game_token, player_tokens, is_existing_player, attributes, new MyCallback());
```
